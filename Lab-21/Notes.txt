Using Docker Compose for Jenkins Setup
Goal:
âœ… Use Docker Compose to manage Jenkins + MySQL in a single YAML file
âœ… Make the setup easier to start, stop, and manage
âœ… Use volumes for persistent data

ğŸ”¹ Step 1ï¸âƒ£: Install Docker Compose (If Not Installed)
Run this to check if Docker Compose is installed:

sh
Copy
Edit
docker-compose version
If itâ€™s not installed, install it with:

sh
Copy
Edit
sudo apt-get update
sudo apt-get install docker-compose -y
ğŸ”¹ Step 2ï¸âƒ£: Create a docker-compose.yml File
Inside a new folder (jenkins-docker), create a docker-compose.yml file:

yaml
Copy
Edit
version: '3.8'

services:
  jenkins:
    image: jenkins/jenkins:lts
    container_name: jenkins
    restart: always
    ports:
      - "8080:8080"
      - "50000:50000"
    volumes:
      - jenkins_data:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock

  mysql:
    image: mysql:latest
    container_name: mysql-db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: testdb
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  jenkins_data:
  mysql_data:
ğŸ“Œ What This Does:
âœ” Defines Jenkins + MySQL in a single file
âœ” Creates persistent storage for Jenkins & MySQL
âœ” Exposes ports so Jenkins & MySQL can communicate

ğŸ”¹ Step 3ï¸âƒ£: Start Everything with One Command
Navigate to the folder where you created docker-compose.yml and run:

sh
Copy
Edit
docker-compose up -d
ğŸ”¹ Step 4ï¸âƒ£: Verify Everything is Running
Check running containers:

sh
Copy
Edit
docker ps
You should see Jenkins and MySQL running.

ğŸ”¹ Step 5ï¸âƒ£: Access Jenkins
Go to:
ğŸ”— http://localhost:8080

Use this command to get the initial Jenkins admin password:

sh
Copy
Edit
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword
ğŸ”¹ Step 6ï¸âƒ£: Connect Jenkins Pipeline to MySQL
Now, create a Jenkins Pipeline using this script:

groovy
Copy
Edit
pipeline {
    agent {
        docker { image 'mysql:latest' }
    }
    stages {
        stage('Check MySQL Connection') {
            steps {
                sh '''
                mysql -h mysql-db -uroot -proot -e "SHOW DATABASES;"
                '''
            }
        }
    }
}
âœ… This should work exactly as before!

ğŸ”¹ Step 7ï¸âƒ£: Stop and Restart Easily
Now that Jenkins & MySQL are managed by Docker Compose, you can:

ğŸ›‘ Stop everything

sh
Copy
Edit
docker-compose down
â–¶ Start everything again

sh
Copy
Edit
docker-compose up -d
ğŸš€ Thatâ€™s it! Your Jenkins setup is now easier to manage!
