Building Docker Images with Jenkins Pipelines
Goal:
âœ… Learn how to build a Docker image in Jenkins
âœ… Tag & push the image to Docker Hub
âœ… Automate containerized application deployment

ğŸ”¹ Step 1ï¸âƒ£: Set Up Docker Credentials in Jenkins
Since Jenkins needs to push images to Docker Hub, we must store credentials securely.

1ï¸âƒ£ Go to Jenkins Dashboard â†’ Manage Jenkins â†’ Manage Credentials
2ï¸âƒ£ Select (global) â†’ Add Credentials

Type: Username & Password

Username: Your Docker Hub username

Password: Your Docker Hub password

ID: docker-hub-credentials (weâ€™ll use this in the pipeline)

ğŸ”¹ Step 2ï¸âƒ£: Create a Sample Application
Create a new folder docker-app and inside it, add:

ğŸ”¹ Dockerfile
dockerfile
Copy
Edit
FROM python:3.9-slim
WORKDIR /app
COPY app.py .
CMD ["python", "app.py"]
ğŸ”¹ app.py
python
Copy
Edit
print("Hello from Jenkins Docker Pipeline!")
ğŸ”¹ Step 3ï¸âƒ£: Write the Jenkins Pipeline
Now, go to Jenkins â†’ New Item â†’ Pipeline and paste this script:

groovy
Copy
Edit
pipeline {
    agent { docker { image 'docker:latest' } }

    environment {
        DOCKERHUB_USER = 'your-docker-hub-username'
        IMAGE_NAME = 'myapp'
        IMAGE_TAG = 'latest'
    }

    stages {
        stage('Checkout Code') {
            steps {
                git 'https://github.com/your-repo/docker-app.git'
            }
        }

        stage('Build Docker Image') {
            steps {
                sh 'docker build -t $DOCKERHUB_USER/$IMAGE_NAME:$IMAGE_TAG .'
            }
        }

        stage('Login to Docker Hub') {
            steps {
                withCredentials([usernamePassword(credentialsId: 'docker-hub-credentials', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD')]) {
                    sh 'echo $PASSWORD | docker login -u $USERNAME --password-stdin'
                }
            }
        }

        stage('Push Image to Docker Hub') {
            steps {
                sh 'docker push $DOCKERHUB_USER/$IMAGE_NAME:$IMAGE_TAG'
            }
        }
    }
}
ğŸ”¹ Step 4ï¸âƒ£: Run the Pipeline
1ï¸âƒ£ Click Build Now
2ï¸âƒ£ If successful, check Docker Hub â†’ Your image should be pushed
