Running Jenkins Builds in Docker Agents
ğŸ“ Goal
Instead of running builds directly inside the Jenkins container, we will:
âœ… Use Docker as a build agent
âœ… Configure Jenkins to dynamically create containers for builds
âœ… Run a test job using a Docker-based agent

Step 1ï¸âƒ£: Install Docker Plugin in Jenkins
Open Jenkins Dashboard (http://localhost:8080).

Go to Manage Jenkins â†’ Manage Plugins.

Search for "Docker Pipeline" and install it.

Restart Jenkins after installation.

Step 2ï¸âƒ£: Configure Docker as a Cloud in Jenkins
Go to Manage Jenkins â†’ Manage Nodes and Clouds.

Click Configure Clouds â†’ Add a new cloud â†’ Select Docker.

In Docker Host URI, enter:

perl
Copy
Edit
unix:///var/run/docker.sock
Click Test Connection â†’ If it works, youâ€™re good! ğŸ¯

Save the settings.

Step 3ï¸âƒ£: Create a Pipeline Using a Docker Agent
Now, letâ€™s create a Jenkins pipeline that runs inside a Docker container.

ğŸ”¹ Go to Jenkins â†’ New Item â†’ Pipeline â†’ OK
ğŸ”¹ Use this pipeline script:

groovy
Copy
Edit
pipeline {
    agent {
        docker {
            image 'ubuntu:latest'
        }
    }
    stages {
        stage('Run inside Docker') {
            steps {
                sh 'echo "Hello from inside a Docker container!"'
                sh 'ls -la'
            }
        }
    }
}
ğŸ”¹ Explanation:

The agent runs inside a Docker container (Ubuntu)

Jenkins spins up a new container, runs the commands, and then removes the container

The steps run simple shell commands inside the container

Step 4ï¸âƒ£: Run the Pipeline
1ï¸âƒ£ Save the pipeline.
2ï¸âƒ£ Click Build Now.
3ï¸âƒ£ If successful, youâ€™ll see:

css
Copy
Edit
Hello from inside a Docker container!
ğŸš€ Next Steps
1ï¸âƒ£ Install the Docker Pipeline plugin
2ï¸âƒ£ Configure Docker as a cloud in Jenkins
3ï¸âƒ£ Run the pipeline inside a Docker agent
4ï¸âƒ£ If successful, reply "done"

Let me know if you need help! ğŸ”¥
